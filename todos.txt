Rework input system.

Tutorial files.

Macros.
